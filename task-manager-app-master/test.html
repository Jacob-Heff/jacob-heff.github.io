<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sidebar Toggle Test</title>
    <style>
        body { margin: 0; padding: 20px; background: #191B1F; color: white; font-family: Arial, sans-serif; }
        .test-buttons { margin-bottom: 20px; }
        .test-btn { 
            background: #238636; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            border-radius: 4px; 
            cursor: pointer; 
        }
        .test-btn:hover { background: #2ea043; }
        .status { 
            background: #21262d; 
            padding: 15px; 
            border-radius: 6px; 
            border: 1px solid #30363d; 
            margin: 10px 0; 
        }
    </style>
</head>
<body>
    <h1>Sidebar Toggle Test</h1>
    
    <div class="test-buttons">
        <button class="test-btn" onclick="testToggle()">Toggle Sidebar</button>
        <button class="test-btn" onclick="checkStatus()">Check Status</button>
        <button class="test-btn" onclick="window.location.href='index.html'">Go to Main App</button>
    </div>
    
    <div id="status" class="status">
        <h3>Current Status:</h3>
        <p id="statusText">Click "Check Status" to see sidebar state</p>
    </div>
    
    <div id="instructions" class="status">
        <h3>Testing Instructions:</h3>
        <ul>
            <li>Click "Go to Main App" to open the task manager</li>
            <li>Look for the hamburger menu (☰) in the top-right of the sidebar header</li>
            <li>Click it to collapse the sidebar</li>
            <li>When collapsed, a separate floating hamburger button should appear in the top-left corner</li>
            <li>The floating button should have a subtle blue pulse animation to make it discoverable</li>
            <li>Click the floating button to expand the sidebar again</li>
            <li>The floating button should disappear when the sidebar is expanded</li>
        </ul>
        <h4>Key Changes Made:</h4>
        <ul>
            <li>✅ Created separate floating toggle button outside the sidebar</li>
            <li>✅ Floating button only appears when sidebar is collapsed</li>
            <li>✅ Floating button is positioned independently (not affected by sidebar transform)</li>
            <li>✅ Both sidebar toggle and floating toggle control the same functionality</li>
            <li>✅ Added pulse animation for better discoverability</li>
        </ul>
    </div>

    <script>
        function testToggle() {
            // Simulate the toggle functionality
            const sidebar = document.querySelector('.sidebar');
            if (sidebar) {
                if (window.taskManager && window.taskManager.toggleSidebar) {
                    window.taskManager.toggleSidebar();
                } else {
                    alert('Task Manager not loaded. Please use "Go to Main App" button.');
                }
            } else {
                alert('Sidebar not found. Please use "Go to Main App" button.');
            }
        }
        
        function checkStatus() {
            const sidebar = document.querySelector('.sidebar');
            const floatingToggle = document.getElementById('floatingToggle');
            const statusText = document.getElementById('statusText');
            
            if (!sidebar) {
                statusText.innerHTML = `
                    <strong>Status:</strong> No sidebar found - you're on the test page.<br>
                    <strong>Action:</strong> Click "Go to Main App" to test the actual sidebar.
                `;
                return;
            }
            
            const isCollapsed = sidebar.classList.contains('collapsed');
            const toggleButton = sidebar.querySelector('.sidebar-toggle');
            const floatingVisible = floatingToggle && floatingToggle.style.display !== 'none';
            
            statusText.innerHTML = `
                <strong>Sidebar State:</strong> ${isCollapsed ? 'Collapsed' : 'Expanded'}<br>
                <strong>Sidebar Toggle Button:</strong> ${toggleButton ? 'Found' : 'Not found'}<br>
                <strong>Floating Toggle Button:</strong> ${floatingToggle ? 'Found' : 'Not found'}<br>
                <strong>Floating Button Visible:</strong> ${floatingVisible ? 'Yes' : 'No'}<br>
                <strong>Expected:</strong> Floating button should be ${isCollapsed ? 'visible' : 'hidden'}
            `;
        }
    </script>
</body>
</html>
